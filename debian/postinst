#!/bin/sh
# postinst script 
# see: dh_installdeb(1)

set -e

# summary of how this script can be called:
#        * <postinst> `configure' <most-recently-configured-version>
#        * <old-postinst> `abort-upgrade' <new version>
#        * <conflictor's-postinst> `abort-remove' `in-favour' <package>
#          <new-version>
#        * <deconfigured's-postinst> `abort-deconfigure' `in-favour'
#          <failed-install-package> <version> `removing'
#          <conflicting-package> <version>
# for details, see http://www.debian.org/doc/debian-policy/ or
# the debian-policy package
#


# Set keyboard clt-alt-backspace to restart X.
#setxkbmap -option terminate:ctrl_alt_bksp

# Netrunner kde4rc.
if [ -e /etc/kde4rc ]
then
  cp /usr/share/netrunner/adjustments/kde/kde4rc /etc/kde4rc
fi

# wine-browsedrive.desktop replaced.
if [ -e /usr/share/applications/wine-browsedrive.desktop ]
then
  cp /usr/share/netrunner/adjustments/kde/wine-browsedrive.desktop /usr/share/applications/wine-browsedrive.desktop
fi

# Users default directories.
if [ -e /etc/xdg/user-dirs.defaults ]
then
  cp /usr/share/netrunner/adjustments/kde/user-dirs.defaults /etc/xdg/user-dirs.defaults
fi

# Netrunner version of startkde.
if [ -e /usr/bin/startkde ]
then
  cp /usr/share/netrunner/adjustments/kde/startkde /usr/bin/startkde
fi

# Add the gnome default applications list.
mkdir -p /etc/gnome
cp /usr/share/netrunner/adjustments/kde/defaults.list /etc/gnome/defaults.list


# amdcccle
# Use kdesudo for amd Radeon users
if [ -e /usr/share/fglrx/amdccclesu.desktop ]
then
  cp /usr/share/netrunner/adjustments/kde/amdccclesu.desktop /usr/share/fglrx/amdccclesu.desktop
fi


# Make gtk apps use KDE themeing when opened as the root user.

if [ ! -e /root/.gtkrc-2.0 ]
then
  cp /usr/share/netrunner-default-settings/dot-gtkrc-2.0-kde4 /root/.gtkrc-2.0
fi
if [ ! -e /root/.config/gtk-3.0/settings.ini ]
then
  mkdir -p /root/.config/gtk-3.0
  cp /usr/share/netrunner-default-settings/settings.ini /root/.config/gtk-3.0/settings.ini
fi

# Remove the activity icon
if [ -e /usr/share/kde4/apps/plasma-desktop/updates/addShowActivitiesManagerPlasmoid.js ]
then
  cp /usr/share/netrunner/adjustments/kde/addShowActivitiesManagerPlasmoid.js /usr/share/kde4/apps/plasma-desktop/updates/addShowActivitiesManagerPlasmoid.js
fi

# Hide gnome mplayer icon
if [ -e /usr/share/applications/gnome-mplayer.desktop ]
then
  cp /usr/share/netrunner/adjustments/kde/gnome-mplayer.desktop /usr/share/applications/gnome-mplayer.desktop
fi

case "$1" in
    configure)
    ;;
    abort-upgrade|abort-remove|abort-deconfigure)
    ;;
    triggered)
    ;;
    *)
        echo "postinst called with unknown argument \`$1'" >&2
        exit 1
    ;;
esac

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#DEBHELPER#

exit 0


